@using FactFinderWeb.BLL
@using FactFinderWeb.ModelsView
@model List<FactFinderWeb.ModelsView.DashboardViewModel>

@{
	ViewData["Title"] = "Dashboard";
	Layout = "~/Views/Shared/_LayoutUser.cshtml";
}


<style>
	.form-wrap {
		background: rgba(255,255,255,1);
		width: 100%;
		max-width: 850px;
		padding: 50px;
		margin: 0 auto;
		position: relative;
		-webkit-border-radius: 10px;
		-moz-border-radius: 10px;
		border-radius: 10px;
		-webkit-box-shadow: 0px 0px 40px rgba(0, 0, 0, 0.15);
		-moz-box-shadow: 0px 0px 40px rgba(0, 0, 0, 0.15);
		box-shadow: 0px 0px 40px rgba(0, 0, 0, 0.15);
		margin-top: 10px;
		margin-bottom: 80px;
	}

		.form-wrap:before {
			content: "";
			width: 90%;
			height: calc(100% + 60px);
			left: 0;
			right: 0;
			margin: 0 auto;
			position: absolute;
			top: -30px;
			background: #101357;
			z-index: -1;
			opacity: 0.8;
			-webkit-border-radius: 10px;
			-moz-border-radius: 10px;
			border-radius: 10px;
			-webkit-box-shadow: 0px 0px 40px rgba(0, 0, 0, 0.15);
			-moz-box-shadow: 0px 0px 40px rgba(0, 0, 0, 0.15);
			box-shadow: 0px 0px 40px rgba(0, 0, 0, 0.15);
		}

	.form-group {
		margin-bottom: 25px;
	}

		.form-group > label {
			display: block;
			font-size: 18px;
			color: #000;
			letter-spacing: 1px;
		}

	.custom-control-label {
		color: #000;
		font-size: 16px;
	}

	.form-control {
		height: 50px;
		background: #ecf0f4;
		border-color: transparent;
		padding: 0 15px;
		font-size: 16px;
		-webkit-transition: all 0.3s ease-in-out;
		-moz-transition: all 0.3s ease-in-out;
		-o-transition: all 0.3s ease-in-out;
		transition: all 0.3s ease-in-out;
	}

		.form-control:focus {
			border-color: #00bcd9;
			-webkit-box-shadow: 0px 0px 20px rgba(0, 0, 0, .1);
			-moz-box-shadow: 0px 0px 20px rgba(0, 0, 0, .1);
			box-shadow: 0px 0px 20px rgba(0, 0, 0, .1);
		}

	textarea.form-control {
		height: 51px;
		padding-top: 15px;
		resize: none;
	}

	.btn {
		padding: .657rem .75rem;
		font-size: 18px;
		letter-spacing: 0.050em;
		-webkit-transition: all 0.3s ease-in-out;
		-moz-transition: all 0.3s ease-in-out;
		-o-transition: all 0.3s ease-in-out;
		transition: all 0.3s ease-in-out;
		width: 48%;
	}

	.btn-primary {
		color: #fff;
		background-color: #FF1D58;
		border-color: #FF1D58;
	}

		.btn-primary:hover {
			color: #101357;
			background-color: #ffffff;
			border-color: #101357;
			-webkit-box-shadow: 0px 0px 20px rgba(0, 0, 0, .1);
			-moz-box-shadow: 0px 0px 20px rgba(0, 0, 0, .1);
			box-shadow: 0px 0px 20px rgba(0, 0, 0, .1);
		}

		.btn-primary:focus, .btn-primary.focus {
			color: #101357;
			background-color: #ffffff;
			border-color: #101357;
			-webkit-box-shadow: 0px 0px 20px rgba(0, 0, 0, .1);
			-moz-box-shadow: 0px 0px 20px rgba(0, 0, 0, .1);
			box-shadow: 0px 0px 20px rgba(0, 0, 0, .1);
		}

		.btn-primary:not(:disabled):not(.disabled):active, .btn-primary:not(:disabled):not(.disabled).active,
		.show > .btn-primary.dropdown-toggle {
			color: #101357;
			background-color: #ffffff;
			border-color: #101357;
		}

			.btn-primary:not(:disabled):not(.disabled):active:focus, .btn-primary:not(:disabled):not(.disabled).active:focus,
			.show > .btn-primary.dropdown-toggle:focus {
				-webkit-box-shadow: 0px 0px 20px rgba(0, 0, 0, .1);
				-moz-box-shadow: 0px 0px 20px rgba(0, 0, 0, .1);
				box-shadow: 0px 0px 20px rgba(0, 0, 0, .1);
			}

	.imgh {
		width: 300px;
		height: 200px;
		object-fit: contain;
	}

</style>



 
<div class="container py-5">

	<!-- Profile Section -->
	<h2 class="mb-4">Welcome, @Model[0]?.UserFullName!</h2>

	<div class="card shadow-sm">
		<div class="card-header bg-primary text-white">
			<h5 class="mb-0">Profile Overview</h5>
		</div>
		<div class="card-body">
			<div class="row mb-3">
				<div class="col-md-6">
					<strong>Email:</strong> @Model[0]?.UserEmail
				</div>
				<div class="col-md-6">
					<strong>Mobile:</strong> @Model[0]?.UserMobile
				</div>
			</div>
		 
			<div class="row mb-3">
				<div class="col-md-6">
					<strong>Email Verified:</strong> @Model[0]?.UserEmailVerification
				</div>
				<div class="col-md-6">
					<strong>Active Status:</strong>
					@(string.IsNullOrEmpty(@Model[0].UserActiveStatus) || @Model[0].UserActiveStatus == "0" ? "Inactive" : "Active")
				</div>
			</div>
			<div class="row mb-3">
				<div class="col-md-6">
					<strong>Registered Date:</strong> @Model[0].UserRegisterDate?.ToString("dd-MM-yyyy")
				</div>
				
			</div> 
		</div>
	</div>


	<!-- Plans Section -->
	<div class="card">
		<div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
			<h5 class="mb-0">Your Plans</h5>
			<a class="text-white" onclick="loadPopup()">Add New Plan</a>
		</div>
		<div class="card-body">
			<table class="table table-bordered">
				<thead class="table-light">
					<tr>
						<th>UID</th>
						<th>Name</th>
						<th>Plan Name</th>
						<th>Plan Year</th>
						<th>Advisor Name</th>
						<th> Created Date</th>
						<th> Updated Date</th>
						<th> Status</th>
						<th></th>
					</tr>
				</thead>
				<tbody>
					@foreach (var item in Model)
{
  
					<tr>
							<td>@item.UId</td>
							<td>@item.UserFullName</td>
							<td>@item.UserPlan</td>
							<td>@item.UserPlanYear</td>
							<td>@item.AdvisorName</td>
							<td>@item.PlanCreatedDate</td>
							<td>@item.PlanUpdatedDate</td>
							<td>@item.ProfileStatus</td>
						<td>
							<a href="/@item.UserPlan.Trim().ToLower()/awareness/@CryptoHelper.Encrypt(item.ProfileId??0)" class="text-primary mx-2">
								Edit your fact finder
							</a>
								<a href="/userprofile/@item.ProfileId" class="text-primary mx-2 " target="_blank">Download PDF</a>
						</td>
					</tr> 
}
				</tbody>
			</table>
		</div>
	</div>

</div>


<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered">
		<div class="modal-content">

			<div class="modal-header">
				<h5 class="modal-title" id="myModalLabel">Add Family Member </h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<form asp-controller="User" asp-action="SetPlan" method="post">
			<div class="modal-body">
				<div class="mb-3">
						<label for="planDropdown" class="form-label">Choose Plan Type</label>
					<select class="form-control" id="PlanType" name="PlanType">
					
					
							<option value="Zero2one">Zero To One</option>
					
							<option value="Basic">Basic</option>
						
							<option value="Comprehensive">Comprehensive</option>
						
							<option value="Wealth">Wealth</option>
						
					</select>

				</div>
			</div>

			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
				<button type="submit" class="btn btn-primary">Continue</button>
			</div>
			</form>
		</div>
	</div>
</div>
<script>
	function loadPopup() {
	   $("#popupContent").load("/YourController/YourPartialAction");
	   var myModal = new bootstrap.Modal(document.getElementById('myModal'));
	   myModal.show();
	}
		

</script>